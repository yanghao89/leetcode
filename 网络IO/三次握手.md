# TCP 三次握手

```test
三次握手是指建立一个TCP链接时,需要客户端和服务端总共发送3个包。
进行三次握手的主要作用就是为了确认双方的接收能力和发送能力是否正常、
指定自己的初始化序列号为后面的可靠性传送做准备。实质上其实就是链接服务器指定端口
建立TCP链接，并同步链接双方的序列号和确认号,交换TCP窗口大小信息。
```


```text
刚开始客户端处于close状态，服务端属于listen状态
1、第一次握手:客户端給服务端发送一个SYN报文,并指明客户端的初始化序列号ISN,
   此时客户端属于SYN_SENT(表示请求链接)状态。首部的同步位SYN=1,初始序号seq=x,SYN=1
   的报文段不能携带数据,但是要消耗掉一个序号。
2、第二次握手:服务端收到客户端的SYN报文之后,会以自己的SYN报文作为应答,并且也是指定
   了自己的初始化序列号ISN(s)。同时会把客户端的ISN+1作为ACK的值,表示自己已经收到客户端
   的SYN,此时服务端处于SYN_RCVD(SYN_Received的缩写 收到)的状态 
   在确认报文段中SYN=1,ACK=1,确认号ack=x+1,初始序号seq=y。
3、第三次握手:客户端收到SYN报文后,会发送一个ACK报文,当然,也是一样把服务器ISN+1作为ACK值,
   表示已经收到了服务器的SYN报文,此时客户端处于建立状态。服务收到ACK报文之后,也处于建立状态。
   此时双方已建立了链接。
```

```test
通俗点解释

```

# TCP为什么需要三次握手,两次不行吗？
```text
为了防止失效的链接请求到服务器,让服务器错误打开链接。
```


